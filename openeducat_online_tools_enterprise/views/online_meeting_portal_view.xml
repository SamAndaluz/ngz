<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="portal_my_home_online_meeting" name="Portal My Home : Online Meeting Details"
              inherit_id="portal.portal_my_home" priority="20">

        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-if="user_id.sudo().is_parent or user_id.sudo().is_student" t-call="portal.portal_docs_entry">
                <t t-set="title">Online Meeting</t>
                <t t-if="user_id.sudo().is_parent">
                    <t t-set="url" t-value="'/online/meeting/'+ student_id"/>
                </t>
                <t t-if="user_id.sudo().is_student">
                    <t t-set="url" t-value="'/online/meeting/'"/>
                </t>
            </t>
        </xpath>
    </template>


    <template id="openeducat_online_meeting_portal">

        <t t-call="portal.portal_layout">
            <t t-call="portal.portal_searchbar">
                <t t-set="title">Online Meeting List</t>
            </t>
            <t t-if="not meeting_ids">
                <p>There are currently no information for your account!!!</p>
            </t>
            <div t-if="meeting_ids" style="background-color:white; padding: 20px 40px 20px 40px;">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Attendance</th>
                            <th>Location</th>
                            <th>Duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-if="meeting_ids" t-foreach="meeting_ids" t-as="meeting">
                            <tr>
                                <td>
                                    <a t-attf-href="/online/meeting/information/#{meeting.id}">
                                        <span t-esc="meeting.name"/>
                                    </a>
                                </td>
                                <td>
                                    <span t-esc="meeting.start" t-options="{'widget': 'datetime'}"/>
                                </td>
                                <td>
                                    <span t-esc="meeting.stop" t-options="{'widget': 'datetime'}"/>
                                </td>
                                <td>
                                    <t t-foreach="meeting.partner_ids" t-as="meet">
                                        <span t-esc="meet.name"/>
                                        <br></br>
                                    </t>
                                </td>
                                <td>
                                    <span t-esc="meeting.location"/>
                                </td>
                                <td>
                                    <span t-esc="meeting.duration" t-options="{'widget': 'float_time'}"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>


    <template id="openeducat_online_meeting_portal_data">
        <t t-call="portal.portal_layout">

            <t t-call="portal.portal_searchbar">
                <t t-set="title">Online Meeting Information</t>
            </t>
            <t t-if="not meeting_ids">
                <p>There are currently no information for your account!!!</p>
            </t>

            <t t-if="meeting_ids" t-foreach="meeting_ids" t-as="meeting_data">
                <div style="background-color:white; padding: 20px 40px 20px 40px;">
                    <div class="mt16">
                        <div t-if="meeting_data.name" class="row col-md-12">
                            <div class="col-md-2">
                                <strong>Meeting Subject:</strong>
                            </div>
                            <div class="col-md-10">
                                <span t-esc="meeting_data.name"/>
                            </div>
                        </div>
                        <div t-if="meeting_data.partner_ids" class="row col-md-12">
                            <div class="col-md-2">
                                <strong>Attendees:</strong>
                            </div>
                            <div class="col-md-10">
                                <t t-foreach="meeting_data.partner_ids" t-as="meet">
                                    <span t-esc="meet.name"/>
                                    <br/>
                                </t>
                            </div>
                        </div>
                        <div class="row mt16 col-md-12">
                            <div class="col-md-6">
                                <div class="row">
                                    <div t-if="meeting_data.start_datetime" class="col-md-4">
                                        <strong>Starting at:</strong>
                                    </div>
                                    <div t-if="meeting_data.start_datetime" class="col-md-8">
                                        <span t-esc="meeting_data.start_datetime" t-options="{'widget': 'datetime'}"/>
                                    </div>
                                    <div t-if="meeting_data.start_date" class="col-md-4">
                                        <strong>Start Date:</strong>
                                    </div>
                                    <div t-if="meeting_data.start_date" class="col-md-8">
                                        <span t-esc="meeting_data.start_date" t-options="{'widget': 'date'}"/>
                                    </div>
                                    <div t-if="meeting_data.stop_date" class="col-md-4">
                                        <strong>End Date:</strong>
                                    </div>
                                    <div t-if="meeting_data.stop_date" class="col-md-8">
                                        <span t-esc="meeting_data.stop_date" t-options="{'widget': 'date'}"/>
                                    </div>
                                    <div t-if="meeting_data.location" class="col-md-4">
                                        <strong>Location:</strong>
                                    </div>
                                    <div t-if="meeting_data.location" class="col-md-8">
                                        <span t-esc="meeting_data.location"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div t-if="meeting_data.duration" class="col-md-4">
                                        <strong>Duration:</strong>
                                    </div>
                                    <div t-if="meeting_data.duration" class="col-md-8">
                                        <span t-esc="meeting_data.duration" t-options="{'widget': 'float_time'}"/>
                                    </div>
                                    <div t-if="meeting_data.allday" class="col-md-4">
                                        <strong>All Day:</strong>
                                    </div>
                                    <div t-if="meeting_data.allday" class="col-md-8">
                                        <span t-esc="meeting_data.allday"/>
                                    </div>
                                    <div t-if="meeting_data.alarm_ids" class="col-md-4">
                                        <strong>Reminders:</strong>
                                    </div>
                                    <div t-if="meeting_data.alarm_ids" class="col-md-8">
                                        <t t-foreach="meeting_data.alarm_ids" t-as="reminder">
                                            <span t-esc="reminder.name"/>
                                            <br/>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div t-if="meeting_data.description" class="row mt16 col-md-12">
                                <div class="col-md-4">
                                    <strong>Description:</strong>
                                </div>
                                <div class="col-md-12">
                                    <span t-esc="meeting_data.description"/>
                                </div>
                            </div>
                        </div>
                        <table class="table mt16 table-bordered">
                            <thead>
                                <tr>
                                    <th>Email</th>
                                    <th>URL</th>
                                    <th>Password</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="attendees" t-as="attendee">
                                    <tr>
                                        <td>
                                            <span t-esc="attendee['email']"/>
                                        </td>
                                        <td>
                                            <span t-esc="attendee['url']"/>
                                        </td>
                                        <td>
                                            <span t-esc="attendee['apw']"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>